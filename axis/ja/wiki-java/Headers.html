<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=shift_jis">
<!--*** This is a generated file.  Do not edit.  ***-->
<link rel="stylesheet" href="../skin/tigris.css" type="text/css">
<link rel="stylesheet" href="../skin/mysite.css" type="text/css">
<link rel="stylesheet" href="../skin/site.css" type="text/css">
<link media="print" rel="stylesheet" href="../skin/print.css" type="text/css">
<title>WebServices - Axis</title>
</head>
<body bgcolor="white" class="composite">
<!--================= start Banner ==================-->
<div id="banner">
<table width="100%" cellpadding="8" cellspacing="0" summary="banner" border="0">
<tbody>
<tr>
<!--================= start Group Logo ==================-->
<td align="left">
<div class="groupLogo">
<a href="http://ws.apache.org/"><img border="0" class="logoImage" alt="The Apache WebServices Project" src="../images/project-logo.jpg"></a>
</div>
</td>
<!--================= end Group Logo ==================-->
<!--================= start Project Logo ==================--><td align="right">
<div class="projectLogo">
<a href="http://ws.apache.org/axis/"><img border="0" class="logoImage" alt="The Apache Axis Project" src="../images/axis.jpg"></a>
</div>
</td>
<!--================= end Project Logo ==================-->
<!--================= start Search ==================--><td valign="top" rowspan="2" align="right" class="search">
<form target="_blank" action="http://www.google.com/search" method="get">
<table summary="search" border="0" cellspacing="0" cellpadding="0">
<tr>
<td bgcolor="#a5b6c6" colspan="3"><img height="10" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td colspan="3"><img height="8" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td><img height="1" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td><td nowrap="nowrap"><input value="ws.apache.org" name="sitesearch" type="hidden"><input size="10" name="q" id="query" type="text"><img height="1" width="5" alt="" src="../skin/images/spacer.gif" class="spacer"><input name="Search" value="GO" type="submit">
<br>
                          Search WS</td><td><img height="1" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td colspan="3"><img height="7" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td class="bottom-left-thick"></td><td bgcolor="#a5b6c6"><img height="1" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td><td class="bottom-right-thick"></td>
</tr>
</table>
</form>
</td>
<!--================= end Search ==================-->
</tr>
</tbody>
</table>
</div>
<!--================= end Banner ==================-->
<!--================= start Main ==================-->
<table width="100%" cellpadding="0" cellspacing="0" border="0" summary="nav" id="breadcrumbs">
<tbody>
<!--================= start Status ==================-->
<tr class="status">
<td>
<!--================= start BreadCrumb ==================--><a href="http://www.apache.org/">Apache</a> | <a href="http://ws.apache.org/">WS</a><a href=""></a>
<!--================= end BreadCrumb ==================--></td><td id="tabs">
<!--================= start Tabs ==================-->
<div class="tab">
<span class="selectedTab"><a class="base-selected" href="../index.html">WebServices-Axis</a></span>
</div>
<!--================= end Tabs ==================-->
</td>
</tr>
</tbody>
</table>
<!--================= end Status ==================-->
<table id="main" width="100%" cellpadding="8" cellspacing="0" summary="" border="0">
<tbody>
<tr valign="top">
<!--================= start Menu ==================-->
<td id="leftcol">
<div id="navcolumn">
<div class="menuBar">
<div class="menu">
<span class="menuLabel">Axis</span>
 
<div class="menuItem">
<a href="/axis/ja/index.html">はじめに</a>
</div>
 
<div class="menuItem">
<a href="/axis/ja/news.html">お知らせ</a>
</div>

 
<div class="menuItem">
<a href="index.html">FAQ/Wiki</a>
</div>
 
<div class="menu">
<span class="menuLabel">活動に参加</span>
  
<div class="menuItem">
<a href="/axis/ja/overview.html">概要</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/cvs.html">CVS リポジトリ</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/mail.html">メーリングリスト</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/ref.html">リファレンスライブラリ</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/bugs.html">バグ</a>
</div>

<div class="menuItem">
<a href="howtobuild.html">サイト構築方法</a>
</div>
 
</div>
 
<div class="menu">
<span class="menuLabel">Axis (Java)</span>
  
<div class="menuItem">
<a href="/axis/ja/java/index.html">ドキュメント</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/java/install.html">インストール</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/java/user-guide.html">ユーザガイド</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/java/developers-guide.html">開発者ガイド</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/java/integration-guide.html">統合ガイド</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/java/architecture-guide.html">アーキテクチャガイド</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/java/reference.html">リファレンスガイド</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/java/reading.html">読書ガイド</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/java/requirements.html">要件</a>
</div>
 
</div>
 
<div class="menu">
<span class="menuLabel">Axis (C++)</span>
  
<div class="menuItem">
<a href="/axis/ja/cpp/index.html">Axis C++ 最新版リリース</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/cpp/documentation.html">ドキュメント</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/cpp/download.html">ダウンロード</a>
</div>
  
<div class="menuItem">
<a href="http://nagoya.apache.org/wiki/apachewiki.cgi?AxisCPPProjectPages">Wiki ページ</a> [外部サイト]
</div>
  
<div class="menuItem">
<a href="/axis/ja/cpp/who.html">メンバ紹介</a>
</div>
  
</div>

<div class="menu">
<span class="menuLabel">ダウンロード</span>
  
<div class="menuItem">
<a href="/axis/ja/releases.html">リリース</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/interim.html">暫定版</a>
</div>
  
<div class="menuItem">
<a href="http://cvs.apache.org/viewcvs/ws-axis/">ソースコード</a> [外部サイト]
</div>

</div>

<div class="menu">
<span class="menuLabel">関連プロジェクト</span>
  
<div class="menuItem">
<a href="http://ws.apache.org/wsif/">WSIF</a> [外部サイト]
</div>
  
<div class="menuItem">
<a href="http://cvs.apache.org/viewcvs/*checkout*/ws-wsil/java/README.htm">WSIL</a> [外部サイト]
</div>
  
<div class="menuItem">
<a href="http://www-124.ibm.com/developerworks/projects/wsdl4j/">WSDL4J</a> [外部サイト]
</div>
  
<div class="menuItem">
<a href="http://www.uddi4j.org/">UDDI4J</a> [外部サイト]
</div>

</div>

<div class="menu">
<span class="menuLabel">その他</span>

<!--  
<div class="menuItem">
<a href="../site.html">サイト全て</a>
</div>
-->
  
<div class="menuItem">
<a href="/axis/ja/who.html">メンバ紹介</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/contact.html">連絡先</a>
</div>
  
<div class="menuItem">
<a href="/axis/ja/legal.html">法関連</a>
</div>

  
<div class="menuItem">
<a href="/axis/ja/docs.html">メモ/ドキュメント</a>
</div>

</div>


</div>
</div>
</div>
</td>
<!--================= end Menu ==================-->
<!--================= start Content ==================--><td>
<div id="bodycol">
<div class="app">
<div align="center">
<h1>WebServices - Axis</h1>
</div>
<div class="h3">

<div class="h3">
<h3>WebServices - Axis - FAQ/Wiki</h3>
</div>

<p>[翻訳者注: このページは FAQ/Wiki ページを静的に翻訳したものです。最新の内容につきましては<a href="http://nagoya.apache.org/wiki/apachewiki.cgi?AxisProjectPages">本家 FAQ/Wiki</a> をご覧下さい。]</p>

<div class="h4">
<h4>ヘッダ</h4>
</div>

<ol>
<li><a name="WSDLJavaHeader">[WSDL2Java スタブを使う際に、どのようにしてヘッダを取得/設定するのですか?]</a> [編集日時 2004年1月16日am8:37 版]

<p><b>質問: WSDL2Java スタブを使う際に、どのようにしてヘッダを取得/設定するのですか?</b></p>
<p>回答: 2種類のヘッダがあります。明示的なものと暗示的なものです。明示的なヘッダはサービスの WSDL の中で定義されています。WSDL2Java 生成ツールはたいていの場合これらのヘッダを認識し、ヘッダをメソッドへの引数として含む、スタブクラスメソッドを出力します。</p>
<p>WSDL の中で明示的に呼び出されたくないヘッダを設定したい場合もあるかもしれません。例えば、ハンドラの中でいくつかのカスタム処理を行いたい場合や、セキュリティを追加したい場合です。この場合、スタブメソッドを呼び出す前に、リクエストにハンドラを追加することができます。</p>
<p>org.apache.axis.client.Stub クラスには2つの setHeader API があります。1つめは、名前空間、名前、ヘッダの値を引数に取ります。</p>
<pre> setHeader(String namespace, String partName, Object headerValue)
</pre>
<p>2つめは、SOAPHeaderElement を引数に取ります。</p>
<pre> setHeader(SOAPHeaderElement header)
</pre>
<p>ここに1つめの API を使った例を挙げます。</p>
<pre>  FooServiceLocator loc = new FooServiceLocator();
  FooService binding = loc.getFooService();
  org.apache.axis.client.Stub s = (Stub) binding;
  s.setHeader("http://my.name.space/headers", "mysecurityheader", "This guy is OK");
  result = binding.myOperation(...);
</pre>
<p>質問: FooService クラス (一般的には WSDL2Java によって生成される) がすでに org.apache.axis.client.Stub クラスを拡張しているのに、どうして (上記のコードに出てくる) "binding" 変数は Stub にキャストする必要があるのか説明してください。</p>
<p>回答: getFooService() はスタブを FooService オブジェクトとして返しますが、それはサービスの操作しか含んでいないインターフェースだからです。これを Stub オブジェクトにキャストすることで、JAX-RPC と Axis Stub API にアクセスすることができます。</p>
<p><b>質問: WSDL2Java スタブを使用する際に、どのようにしてレスポンスヘッダを受け取りますか?</b></p>
<p>回答: Axis Stub オブジェクトの中で getResponseHeader() API を使用します。</p>
<pre> SOAPHeaderElement getResponseHeader(String namespace, String partName)
</pre>
<p>あるいはヘッダの完全なリストを受け取ります。</p>
<pre> SOAPHeaderElement[] getResponseHeaders()
</pre>
<p>ここに、myOperation() から返ってきたヘッダを取得するコードの断片をのせます。</p>
<pre>  
  FooServiceLocator loc = new FooServiceLocator();
  FooService binding = loc.getFooService();
  // ヘッダを返すWebサービス操作を呼びます
  result = binding.myOperation(...);
  org.apache.axis.client.Stub s = (Stub) binding;
  s.getResponseHeader("http://my.name.space/headers", "mysecurityheader");
 
</pre>
<p><b>質問: Stub オブジェクトの中で getHeader() API は何をしますか? なぜレスポンスヘッダを返さないのですか?</b></p>
<p>回答: これらの API は、操作リクエストの中で送られる/送られた Stub/Call<a href="http://nagoya.apache.org/wiki/apachewiki.cgi?action=edit&amp;id=AxisProjectPages/Call">?</a> の中にあるヘッダを返します。これは Axis 1.1 で変更され、Stub からヘッダを取得する方法がなくなったのですが (依然として Call オブジェクトから取得することはできました)、この問題を解決するために 1.1 以降では getResponseHeader API が追加されました。</p>
<p><b>質問: Axis 1.1 を使用している場合、どのようにしてレスポンスヘッダを受け取ればいいのでしょうか?</b></p>
<p>回答: Service オブジェクトから利用可能な Call オブジェクトを使用して SOAPEnvelope を取得してください。このオブジェクトには多くのヘッダ関数があります。あるいは、SOAPEnvelope に対して getHeader() を呼び出すことで JAX-RPC の javax.xml.soap.SOAPHeader オブジェクトを取得することができます。SOAPEnvelope クラスは一般的に Iterator を返すので、ヘッダを自分で列挙する必要があります。</p>
<p>ここに SOAPEnvelope に対して Axis API を使用する方法の例を挙げます。</p>
<pre>  
 FooServiceLocator loc = new FooServiceLocator();
 FooService binding = loc.getFooService();
 // ヘッダを返すWebサービス操作を呼びます
 result = binding.myOperation(...);
 Call lastCall = ((org.apache.axis.client.Service)service).getCall();
 org.apache.axis.message.SOAPEnvelope env = lastCall.getResponseMessage().getSOAPEnvelope;
 SOAPHeaderElement h = env.getHeaderByName(("http://my.name.space/headers", "mysecurityheader");
 
</pre>

</li>
<hr>
<li><a name="WSDLJavaHeaderServer">[自分のWebサービスのコードの中で、どのようにしてヘッダを取得/設定するのですか?]</a> [編集日時 2004年1月16日am8:36 版]

<p><b>質問: 自分のWebサービスのコードの中で、どのようにしてヘッダを取得/設定するのですか?</b></p>
<p>回答: MessageContext オブジェクトを使用します。</p>
<p>ここにいくつかのサンプルコードを挙げます</p>
<pre>  // 現在の MessageContext を取得します
  MessageContext ctx = org.apache.axis.MessageContext.getCurrentContext();
</pre>
<pre>  // リクエストの SOAP エンベロープを取得します
  SOAPEnvelope env = ctx.getRequestMessage().getSOAPEnvelope();
</pre>
<pre>  // ヘッダを取得します
  SOAPHeaderElement soapHeaderElement = env.getHeaderByName(headerNamespace, headerName);
</pre>
<pre>  // ヘッダの値を取得します。複雑な型である可能性もあります
  Object value = soapHeaderElement.getObjectValue();
</pre>
<p><b>質問: クライアントへのレスポンスの中にどのようにしてヘッダを設定するのですか?</b></p>
<p>回答: SOAPHeaderElement を作成し、レスポンスメッセージの SOAPEnvelope に追加します。</p>
<pre>   // 現在の MessageContext を取得します
   MessageContext ctx = org.apache.axis.MessageContext.getCurrentContext();
</pre>
<pre>   // リクエストの SOAP エンベロープを取得します
   SOAPEnvelope env = ctx.getResponseMessage().getSOAPEnvelope();
</pre>
<pre>   // SOAP ヘッダオブジェクトを作成します
   SOAPHeaderElement headerElement = 
       new org.apache.axis.message.SOAPHeaderElement(headerNamespace, headerName, headerValue);
   headerElement.setMustUnderstand(mustUnderstand);
</pre>
<pre>   // ヘッダを設定します
   env.addHeader(headerElement);
</pre>

</li>
<hr>
<li><a name="WSDLJavaHeaderWSDL">[自分のサービス用に生成された WSDL の中で、どのようにしてヘッダを取得するのですか?]</a> [編集日時 2004年4月13日pm5:05 版]

<p><b>質問: 自分のサービス用に生成された WSDL の中で、どのようにしてヘッダを取得するのですか?</b></p>
<p><b>回答:</b>inHeader と outHeader 属性を使えば、操作パラメータはヘッダ要素として定義することができます。Axis はこれらのパラメータを、生成された WSDL の中で、操作のためのヘッダとして定義します。これらは、サービスの一部である Java 関数のパラメータであることに注意してください。</p>
<p>例: </p>
<pre> 
 &lt;operation name="addMovie"
           returnType="xsd:string"
           xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;
   &lt;parameter name="title" type="xsd:string" inHeader="true"/&gt;
   &lt;parameter name="pricePerDay" type="xsd:double" outHeader="true"/&gt;
 &lt;/operation&gt;
 
</pre>
<p>これは addMovie(String title, DoubleHolder pricePerDay) というシグネチャである Java 関数のための WSDD 操作定義となります。</p>
<p><b>回答2:</b> もう一つのやり方としては、<tt>Handler.generateWSDL()</tt> フックを使用することが挙げられます。</p>
</li>
</ol>

</div>
</div>
</div>
</td>
<!--================= end Content ==================-->
</tr>
</tbody>
</table>
<!--================= end Main ==================-->
<!--================= start Footer ==================-->
<div id="footer">
<table summary="footer" cellspacing="0" cellpadding="4" width="100%" border="0">
<tbody>
<tr>
<!--================= start Copyright ==================-->
<td colspan="2">
<div align="center">
<div class="copyright"></div>
</div>
</td>
<!--================= end Copyright ==================-->
</tr>
<tr>
<td align="left">
<!--================= start Host ==================-->
<!--================= end Host ==================--></td><td align="right">
<!--================= start Credits ==================-->
<div align="right">
<div class="credit">
<a href="http://validator.w3.org/check/referer"><img width="88" height="31" alt="Valid HTML 4.01!" src="../skin/images/valid-html401.png" class="logoImage"></a><a href="http://jigsaw.w3.org/css-validator/"><img width="88" height="31" alt="Valid CSS!" src="../skin/images/vcss.png" class="logoImage"></a><a href="http://xml.apache.org/forrest/"><img border="0" class="logoImage" alt="Built with Apache Forrest" src="../images/built-with-forrest-button.png" width="88" height="31"></a>
</div>
</div>
<!--================= end Credits ==================-->
</td>
</tr>
</tbody>
</table>
</div>
<!--================= end Footer ==================-->
</body>
</html>
