<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/xdoc/rampartconfig-guide.xml at 01 Dec 2024
 | Rendered using Apache Maven Fluido Skin 2.0.0-M11
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>Apache Rampart</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.0.0-M11.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.0.0-M11.min.js"></script>
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><img class="class java.lang.Object" src="images/apache-rampart-logo.jpg" /></h1></div></div>
          <div class="pull-right"><div id="bannerRight"><h1><a href="http://www.apache.org"><img class="class java.lang.Object" src="http://www.apache.org/images/asf_logo_wide.png" /></a></h1></div></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 30 Nov 2024<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.8.0</li>
        <li class="pull-right"><a href="../core/">Apache Axis2/Java</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Apache Rampart</li>
    <li><a href="index.html">Home</a></li>
    <li><a href="javascript:void(0)"><span class="icon-chevron-down"></span>Downloads</a>
     <ul class="nav nav-list">
      <li><a href="download.html">Releases</a></li>
     </ul></li>
    <li><a href="javascript:void(0)"><span class="icon-chevron-down"></span>Release Notes</a>
     <ul class="nav nav-list">
      <li><a href="release-notes/1.6.1.html">1.6.1</a></li>
      <li><a href="release-notes/1.6.2.html">1.6.2</a></li>
      <li><a href="release-notes/1.6.3.html">1.6.3</a></li>
      <li><a href="release-notes/1.6.4.html">1.6.4</a></li>
      <li><a href="release-notes/1.7.0.html">1.7.0</a></li>
      <li><a href="release-notes/1.8.0.html">1.8.0</a></li>
     </ul></li>
   <li class="nav-header">Documentation</li>
    <li><a href="quick-start.html">Getting Started</a></li>
    <li><a href="samples.html">Samples</a></li>
    <li><a href="http://wiki.apache.org/ws/FrontPage/Rampart/FAQ" class="externalLink">FAQ</a></li>
    <li class="active"><a>Rampart Configuration</a></li>
    <li><a href="setting-up-sts.html">STS Configuration</a></li>
    <li><a href="developer-guide.html">Developer Guide</a></li>
   <li class="nav-header">Resources</li>
    <li><a href="articles.html">Articles</a></li>
    <li><a href="specifications.html">Specifications</a></li>
    <li><a href="apidocs/index.html">Online Javadocs</a></li>
   <li class="nav-header">Project Information</li>
    <li><a href="team.html">Project Team</a></li>
    <li><a href="http://issues.apache.org/jira/browse/Rampart" class="externalLink">Issue Tracking</a></li>
    <li><a href="mail-lists.html">Mailing Lists</a></li>
    <li><a href="https://github.com/apache/axis-axis2-java-rampart" class="externalLink">Source Code</a></li>
    <li><a href="http://www.apache.org/licenses/" class="externalLink">License</a></li>
    <li><a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink">Sponsorship</a></li>
    <li><a href="http://www.apache.org/foundation/thanks.html" class="externalLink">Thanks</a></li>
    <li><a href="http://www.apache.org/security/" class="externalLink">Security</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<html xmlns="http://www.w3.org/1999/xhtml">

<section><a id="Apache_Rampart_-_Configuration_Guide"></a>
<h1>Apache Rampart - Configuration Guide</h1>
<section><a id="Rampart_Configurations"></a>
<h2>Rampart Configurations</h2>

<p>RampartConfig element can have any of the following child elements. Schema is available <a href="rampart-config.xsd">here</a></p>

<table class="table table-striped"><tbody>
    
<tr class="a a">
<td><b>Parameter</b></td>
<td><b>Description</b></td>
<td><b>Example</b></td></tr>

    
<tr class="b b">
<td>user</td>
<td>The user's name</td>
<td>Set username of UsernameToken to be used <br /></br>
        &lt;user&gt; bob&lt;/user&gt;</td></tr>
    
<tr class="a a">
<td>userCertAlias</td>
<td>The user's cert alias</td>
<td>Set alias of the key to be used to sign<br /></br>
        &lt;userCertAlias&gt; bob&lt;/userCertAlias&gt;</td></tr>
    
<tr class="b b">
<td>encryptionUser</td>
<td>The user's name for encryption.</td>
<td>
        &lt;encryptionUser&gt;alice&lt;/encryptionUser&gt;</td></tr>
    
<tr class="a a">
<td>passwordCallbackClass</td>
<td>Callback class used to provide the password required to create the
        UsernameToken or to sign the message</td>
<td>

<pre>
&lt;passwordCallbackClass&gt;
    org.apache.axis2.security.PWCallback
&lt;/passwordCallbackClass&gt;
</pre></td></tr>
    
<tr class="b b">
<td>policyValidatorCbClass</td>
<td>Callback class used to provide custom validater  </td>
<td>

<pre>
&lt;policyValidatorCbClass&gt;
    org.apache.axis2.security.CustomPolicyValidater
&lt;/policyValidatorCbClass&gt;
</pre></td></tr>
    
<tr class="a a">
<td>signatureCrypto</td>
<td>properties to needed perform signature, such as crypto
        provider, keystore and its password</td>
<td>

<pre>
&lt;signatureCrypto&gt;
	&lt;crypto provider=&quot;org.apache.ws.security.components.crypto.Merlin&quot;&gt;
		&lt;property name=&quot;org.apache.ws.security.crypto.merlin.keystore.type&quot;&gt;PKCS12&lt;/property&gt;
		&lt;property name=&quot;org.apache.ws.security.crypto.merlin.file&quot;&gt;client.pkcs12&lt;/property&gt;
		&lt;property name=&quot;org.apache.ws.security.crypto.merlin.keystore.password&quot;&gt;apache&lt;/property&gt;
	&lt;/crypto&gt;
&lt;signatureCrypto&gt;
</pre>
		</td></tr>
    
<tr class="b b">
<td>encryptionCrypto</td>
<td>properties to needed perform signature, such as crypto
        provider, keystore and its password</td>
<td>

<pre>
&lt;encryptionCrypto&gt;
    ....crypto element ......
&lt;/encryptionCrypto&gt;
</pre></td></tr>
    
<tr class="a a">
<td>decryptionCrypto</td>
<td>properties to needed perform signature, such as crypto
        provider, keystore and its password</td>
<td>

<pre>
&lt;decryptionCrypto&gt;
    ....crypto element ......
&lt;/decryptionCrypto&gt;</pre></td></tr>
 
<tr class="b b">
<td>timestampTTL</td>
<td>Time to live of Timestamp</td>
<td>The default timestamp time to live is 300 seconds</td></tr>
 
<tr class="a b">
<td>disableBSPEnforcement.</td>
<td>WSS4J param to set on class RequestData</td>
<td>The default is false</td></tr>
    
<tr class="b a">
<td>timestampMaxSkew</td>
<td>The maximum tolerence limit for timeskew of the timestamp</td>
<td>Rampart allows timestamps created slightly ahead of the reciever's time.<br /> This parameter allows to specify the tolerence limit</td></tr>
    
<tr class="a b">
<td>timestampPrecisionInMilliseconds</td>
<td> Whether the timestamps precision should be milliseconds </td>
<td>When this value is set false, generated timestamps doesn't contain milliseconds </td></tr>
    
<tr class="b a">
<td>optimizeParts</td>
<td></td>
<td></td></tr>
    
<tr class="a b">
<td>tokenStoreClass</td>
<td></td>
<td></td></tr>
    
<tr class="b a">
<td>sslConfig</td>
<td>SSL Configuration need for Transportbinding</td>
<td>Can specify the properties such as &quot;javax.net.ssl.trustStore&quot; and &quot;javax.net.ssl.trustStorePassword&quot;. Please see below for more information.</td></tr>
  </tbody></table>
<br /></br>
<section><a id="Crypto_Provider"></a>
<h3>Crypto Provider</h3>
  
<p>org.apache.ws.security.crypto.provider defines the implementation of
the org.apache.ws.security.components.crypto.Crypto interface to provide the
crypto information required by WSS4J. The other properties defined are the
configuration properties used by the implementation class
(org.apache.ws.security.components.crypto.Merlin).
<br /></br>
      <a id="ref"></a>
      <a id="references"></a>
  </p>
      <a id="References"></a>
      </section><section><a id="Crypto_Caching"></a>
<h3>Crypto Caching</h3>
      
<p>Enabling caching of crypto objects will improve the performance of security processing.
          After
          enabling crypto caching, the crypto objects will be read from a cache instead of
          constructing them by reading the keystore files.
      </p>
      
<p>To enable caching of Crypto objects, two attributes should be added to the crypto elements
          of signatureCrypto/encryptionCrypto of RampartConfig.
      </p>
      
<ol style="list-style-type: decimal;">
          
<li>
              <b>cryptoKey</b> - 
<p>As the value of this attribute, specify the property of a Crypto
              implementation which points to the location of the keystore. For example in
              Merlin, the
              property &quot;org.apache.ws.security.crypto.merlin.file&quot; is unique and its pointing to
              the
              location of the keystore. Absence of this attribute will not enable caching.</p>
          </li>
          
<li>
              <b>cacheRefreshInterval</b> - 
<p>This is the cache refresh interval specified in
              milliseconds. Any
              object that resides in the cache longer than this period will be considered as
              expired.
              Cache will not be refreshed if this attribute is not present in the configuration.
              If you
              do not want to refresh the cache, provide only the &quot;cryptoKey&quot; attribute.</p>
          </li>
      </ol>
      
<p>
          A sample configuration is provided below. It uses the Merlin crypto implementation for
          signing and encryption. Here, the value of the cryptoKey attribute is eqaul to
          &quot;org.apache.ws.security.crypto.merlin.file&quot; and the cache refresh interval is 300000
          milliseconds.
      </p>
      
<pre>
          &lt;ramp:RampartConfig xmlns:ramp=&quot;http://ws.apache.org/rampart/policy&quot;;&gt;
            &lt;ramp:signatureCrypto&gt;
                &lt;ramp:crypto provider=&quot;org.apache.ws.security.components.crypto.Merlin&quot; cryptoKey=&quot;org.apache.ws.security.crypto.merlin.file&quot; cacheRefreshInterval=&quot;300000&quot;&gt;
                    &lt;ramp:property name=&quot;org.apache.ws.security.crypto.merlin.keystore.type&quot;&gt;PKCS12&lt;/ramp:property&gt;
                    &lt;ramp:property name=&quot;org.apache.ws.security.crypto.merlin.file&quot;&gt;service.pkcs12&lt;/ramp:property&gt;
                    &lt;ramp:property name=&quot;org.apache.ws.security.crypto.merlin.keystore.password&quot;&gt;servicePW&lt;/ramp:property&gt;
                &lt;/ramp:crypto&gt;
            &lt;/ramp:signatureCrypto&gt;
            &lt;ramp:encryptionCrypto&gt;
                &lt;ramp:crypto provider=&quot;org.apache.ws.security.components.crypto.Merlin&quot; cryptoKey=&quot;org.apache.ws.security.crypto.merlin.file&quot; cacheRefreshInterval=&quot;300000&gt;
                    &lt;ramp:property name=&quot;org.apache.ws.security.crypto.merlin.keystore.type&quot;&gt;PKCS12&lt;/ramp:property&gt;
                    &lt;ramp:property name=&quot;org.apache.ws.security.crypto.merlin.file&quot;&gt;service.pkcs12&lt;/ramp:property&gt;
                    &lt;ramp:property name=&quot;org.apache.ws.security.crypto.merlin.keystore.password&quot;&gt;apache&lt;/ramp:property&gt;
                &lt;/ramp:crypto&gt;
            &lt;/ramp:encryptionCrypto&gt;
          &lt;/ramp:RampartConfig&gt;
      </pre>
      
<p>Crypto caching is enabled by default when Merlin is used as the crypto provider. So Rampart will cache the crypto objects
      with an infinite cache refresh interval. This crypto refresh interval can be overridden by setting the cacheRefreshInterval parameter
          as described above. If it is required to disable crypto caching when Merlin is used, set the 'enableCryptoCaching' parameter
          value to 'false'. Please refer to the following example.
      </p>
      
<pre>
            &lt;ramp:signatureCrypto&gt;
                &lt;ramp:crypto provider=&quot;org.apache.ws.security.components.crypto.Merlin&quot; enableCryptoCaching=&quot;false&quot;&gt;
                    &lt;ramp:property name=&quot;org.apache.ws.security.crypto.merlin.keystore.type&quot;&gt;PKCS12&lt;/ramp:property&gt;
                    &lt;ramp:property name=&quot;org.apache.ws.security.crypto.merlin.file&quot;&gt;service.pkcs12&lt;/ramp:property&gt;
                    &lt;ramp:property name=&quot;org.apache.ws.security.crypto.merlin.keystore.password&quot;&gt;servicePW&lt;/ramp:property&gt;
                &lt;/ramp:crypto&gt;
            &lt;/ramp:signatureCrypto&gt;
      </pre>
      <br /></br>
      </section><section><a id="References"></a>
<h3>References</h3>1.
      <a href="http://ws.apache.org/wss4j" class="externalLink">Apache WSS4J -Home</a>
  </section></section>
</html>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2005–2024
<a href="http://www.apache.org">Apache Software Foundation</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
