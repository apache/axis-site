<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/xdoc/docs/json_gson_user_guide.xml at 2025-03-05
 | Rendered using Apache Maven Fluido Skin 2.0.0-M11
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>How to configure Native approach and XML Stream API base approach – Apache Axis2</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-2.0.0-M11.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-2.0.0-M11.min.js"></script>
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href="http://www.apache.org/"><img class="class java.lang.Object" src="http://www.apache.org/images/asf_logo_wide.png" /> Apache Axis2</a></h1></div></div>
          <div class="pull-right"><div id="bannerRight"><h1><a href=".././"><img class="class java.lang.Object" src="../images/axis.jpg" /></a></h1></div></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2025-03-04<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.0.0<span class="divider">|</span></li>
      <li><a href="http://www.apache.org" class="externalLink">Apache</a><span class="divider">/</span></li>
      <li><a href="../index.html">Axis2/Java</a><span class="divider">/</span></li>
    <li class="active">How to configure Native approach and XML Stream API base approach</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Axis2/Java</li>
    <li><a href="../index.html">Home</a></li>
    <li><a href="../download.html">Downloads</a></li>
    <li><a href="javascript:void(0)"><span class="icon-chevron-down"></span>Release Notes</a>
     <ul class="nav nav-list">
      <li><a href="../release-notes/1.6.1.html">1.6.1</a></li>
      <li><a href="../release-notes/1.6.2.html">1.6.2</a></li>
      <li><a href="../release-notes/1.6.3.html">1.6.3</a></li>
      <li><a href="../release-notes/1.6.4.html">1.6.4</a></li>
      <li><a href="../release-notes/1.7.0.html">1.7.0</a></li>
      <li><a href="../release-notes/1.7.1.html">1.7.1</a></li>
      <li><a href="../release-notes/1.7.2.html">1.7.2</a></li>
      <li><a href="../release-notes/1.7.3.html">1.7.3</a></li>
      <li><a href="../release-notes/1.7.4.html">1.7.4</a></li>
      <li><a href="../release-notes/1.7.5.html">1.7.5</a></li>
      <li><a href="../release-notes/1.7.6.html">1.7.6</a></li>
      <li><a href="../release-notes/1.7.7.html">1.7.7</a></li>
      <li><a href="../release-notes/1.7.8.html">1.7.8</a></li>
      <li><a href="../release-notes/1.7.9.html">1.7.9</a></li>
      <li><a href="../release-notes/1.8.0.html">1.8.0</a></li>
      <li><a href="../release-notes/1.8.1.html">1.8.1</a></li>
      <li><a href="../release-notes/1.8.2.html">1.8.2</a></li>
      <li><a href="../release-notes/2.0.0.html">2.0.0</a></li>
     </ul></li>
    <li><a href="../modules/index.html">Modules</a></li>
    <li><a href="../tools/index.html">Tools</a></li>
   <li class="nav-header">Documentation</li>
    <li><a href="../docs/toc.html">Table of Contents</a></li>
    <li><a href="../docs/installationguide.html">Installation Guide</a></li>
    <li><a href="../docs/quickstartguide.html">QuickStart Guide</a></li>
    <li><a href="../docs/userguide.html">User Guide</a></li>
    <li><a href="../docs/jaxws-guide.html">JAXWS Guide</a></li>
    <li><a href="../docs/pojoguide.html">POJO Guide</a></li>
    <li><a href="../docs/spring.html">Spring Guide</a></li>
    <li><a href="../docs/webadminguide.html">Web Administrator&apos;s Guide</a></li>
    <li><a href="../docs/migration.html">Migration Guide (from Axis1)</a></li>
   <li class="nav-header">Resources</li>
    <li><a href="../faq.html">FAQ</a></li>
    <li><a href="../articles.html">Articles</a></li>
    <li><a href="http://wiki.apache.org/ws/FrontPage/Axis2/" class="externalLink">Wiki</a></li>
    <li><a href="../refLib.html">Reference Library</a></li>
    <li><a href="../apidocs/index.html">Online Java Docs</a></li>
   <li class="nav-header">Get Involved</li>
    <li><a href="../overview.html">Overview</a></li>
    <li><a href="../git.html">Checkout the Source</a></li>
    <li><a href="../mail-lists.html">Mailing Lists</a></li>
    <li><a href="../release-process.html">Release Process</a></li>
    <li><a href="../guidelines.html">Developer Guidelines</a></li>
    <li><a href="../siteHowTo.html">Build the Site</a></li>
   <li class="nav-header">Project Information</li>
    <li><a href="../team-list.html">Project Team</a></li>
    <li><a href="../issue-tracking.html">Issue Tracking</a></li>
    <li><a href="https://github.com/apache/axis-axis2-java-core" class="externalLink">Source Code</a></li>
    <li><a href="../thanks.html">Acknowledgements</a></li>
   <li class="nav-header">Apache</li>
    <li><a href="http://www.apache.org/licenses/LICENSE-2.0.html" class="externalLink">License</a></li>
    <li><a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink">Sponsorship</a></li>
    <li><a href="http://www.apache.org/foundation/thanks.html" class="externalLink">Thanks</a></li>
    <li><a href="http://www.apache.org/security/" class="externalLink">Security</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">


   
        <section><a id="How_to_configure_Native_approach_and_XML_Stream_API_base_approach"></a>
<h1>How to configure Native approach and XML Stream API base approach</h1>

        <a id="native_approach"></a><section id="native_approach"><a id="How_to_use_Native_JSON_support"></a>
<h1>How to use Native JSON support</h1>
            
<p>If you need to expose your POJO services to support pure JSON requests as well as SOAP requests, then you
                need to go through the following process to do that with this new feature introduced into Axis2 JSON
                support.</p>

            
<p>Step 1 : Set in-out message receiver and in-only message receiver</p>

            
<p>You need to set <code>org.apache.axis2.json.gson.rpc.JsonRpcMessageReceiver</code> with
                <code>http://www.w3.org/ns/wsdl/in-out</code> message exchange pattern. Also with <code>http://www.w3.org/ns/wsdl/in-only</code>
                message exchange pattern, set <code>org.apache.axis2.json.gson.rpc.JsonInOnlyRPCMessageReceiver</code>.  </p>

            
<p>eg.</p>
            
<pre>
            &lt;messageReceivers&gt;
                &lt;messageReceiver mep=&quot;http://www.w3.org/ns/wsdl/in-out&quot;
                                 class=&quot;org.apache.axis2.json.gson.rpc.JsonRpcMessageReceiver&quot;/&gt;
                &lt;messageReceiver mep=&quot;http://www.w3.org/ns/wsdl/in-only&quot;
                                 class=&quot;org.apache.axis2.json.gson.rpc.JsonInOnlyRPCMessageReceiver&quot;/&gt;
            &lt;/messageReceivers&gt;
            </pre>
            
<p>Step 2: Set message builder and message formatter</p>

            
<p>you need to edit axis2.xml in <code>[AXIS2_HOME]/conf/ </code>directory, to set <code>org.apache.axis2.json.gson.JsonBuilder</code>
                as message builder with application/json contentType to handle JSON requests and
                <code>org.apache.axis2.json.gson.JsonFormatter</code> as message formatter with application/json
                contentType to write response to wire as JSON format.</p>

            
<p>eg.</p>
            
<pre>
                  &lt;messageBuilder contentType=&quot;application/json&quot;
                                  class=&quot;org.apache.axis2.json.gson.JsonBuilder&quot; /&gt;

                  &lt;messageFormatter contentType=&quot;application/json&quot;
                                    class=&quot;org.apache.axis2.json.gson.JsonFormatter&quot; /&gt;
           </pre>
        </section>

        <a id="xml_stream_api_base_approach"></a><section id="xml_stream_api_base_approach"><a id="How_to_use_XML_stream_API_based_approach"></a>
<h1>How to use XML stream API based approach</h1>

            
<p>You can use this XML Stream API based approach with databinding services like ADB and xmlbeans as well
                as with normal POJO services. Follow the steps mentioned below to use this new feature introduced into
                Axis2 JSON support.</p>

            
<p>Step 1 : Set message builder and message formatter</p>

            
<p>You need to edit axis2.xml in <code>[AXIS2_HOME]/conf/</code> directory, to set <code>org.apache.axis2.json.gson.JsonBuilder</code>
                as message builder with <code>application/json</code> contentType to handle JSON requests and,
                <code>org.apache.axis2.json.gson.JsonFormatter</code> as message formatter with <code>application/json</code> contentType to
                write response to wire as JSON format.</p>

            
<p>eg.</p>
            
<pre>
                &lt;messageBuilder contentType=&quot;application/json&quot;
                                class=&quot;org.apache.axis2.json.gson.JsonBuilder&quot; /&gt;

                &lt;messageFormatter contentType=&quot;application/json&quot;
                                  class=&quot;org.apache.axis2.json.gson.JsonFormatter&quot; /&gt;
                        
            </pre>

            
<p>Step 2: Set inflow handlers</p>

            
<p>Remove RequestURIOperationDispatcher handler from dispatch phase and place it as the last handler in
                transport phase. Now add new JSONMessageHandler after the RequestURIOperationDispatcher. Finally
                transport phase would be like following,</p>

            
<pre>
            &lt;phaseOrder type=&quot;InFlow&quot;&gt;
                &lt;!--  System predefined phases  --&gt;
                &lt;phase name=&quot;Transport&quot;&gt;
                    -------------
                    &lt;handler name=&quot;RequestURIOperationDispatcher&quot;
                             class=&quot;org.apache.axis2.dispatchers.RequestURIOperationDispatcher&quot;/&gt;
                    &lt;handler name=&quot;JSONMessageHandler&quot;
                             class=&quot;org.apache.axis2.json.gson.JSONMessageHandler&quot; /&gt;
                &lt;/phase&gt;
                ------------
            &lt;/phaseOrder&gt;
                    
            </pre>

        </section>

    
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2004–2025
<a href="https://www.apache.org/">The Apache Software Foundation</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>