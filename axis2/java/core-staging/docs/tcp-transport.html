<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/apt/docs/tcp-transport.apt at 2025-03-05
 | Rendered using Apache Maven Fluido Skin 2.0.0-M11
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>Apache Axis2</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-2.0.0-M11.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-2.0.0-M11.min.js"></script>
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href="http://www.apache.org/"><img class="class java.lang.Object" src="http://www.apache.org/images/asf_logo_wide.png" /> Apache Axis2</a></h1></div></div>
          <div class="pull-right"><div id="bannerRight"><h1><a href=".././"><img class="class java.lang.Object" src="../images/axis.jpg" /></a></h1></div></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2025-03-04<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.0.0<span class="divider">|</span></li>
      <li><a href="http://www.apache.org" class="externalLink">Apache</a><span class="divider">/</span></li>
      <li><a href="../index.html">Axis2/Java</a><span class="divider">/</span></li>

    <li class="active">Apache Axis2</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Axis2/Java</li>
    <li><a href="../index.html">Home</a></li>
    <li><a href="../download.html">Downloads</a></li>
    <li><a href="javascript:void(0)"><span class="icon-chevron-down"></span>Release Notes</a>
     <ul class="nav nav-list">
      <li><a href="../release-notes/1.6.1.html">1.6.1</a></li>
      <li><a href="../release-notes/1.6.2.html">1.6.2</a></li>
      <li><a href="../release-notes/1.6.3.html">1.6.3</a></li>
      <li><a href="../release-notes/1.6.4.html">1.6.4</a></li>
      <li><a href="../release-notes/1.7.0.html">1.7.0</a></li>
      <li><a href="../release-notes/1.7.1.html">1.7.1</a></li>
      <li><a href="../release-notes/1.7.2.html">1.7.2</a></li>
      <li><a href="../release-notes/1.7.3.html">1.7.3</a></li>
      <li><a href="../release-notes/1.7.4.html">1.7.4</a></li>
      <li><a href="../release-notes/1.7.5.html">1.7.5</a></li>
      <li><a href="../release-notes/1.7.6.html">1.7.6</a></li>
      <li><a href="../release-notes/1.7.7.html">1.7.7</a></li>
      <li><a href="../release-notes/1.7.8.html">1.7.8</a></li>
      <li><a href="../release-notes/1.7.9.html">1.7.9</a></li>
      <li><a href="../release-notes/1.8.0.html">1.8.0</a></li>
      <li><a href="../release-notes/1.8.1.html">1.8.1</a></li>
      <li><a href="../release-notes/1.8.2.html">1.8.2</a></li>
      <li><a href="../release-notes/2.0.0.html">2.0.0</a></li>
     </ul></li>
    <li><a href="../modules/index.html">Modules</a></li>
    <li><a href="../tools/index.html">Tools</a></li>
   <li class="nav-header">Documentation</li>
    <li><a href="../docs/toc.html">Table of Contents</a></li>
    <li><a href="../docs/installationguide.html">Installation Guide</a></li>
    <li><a href="../docs/quickstartguide.html">QuickStart Guide</a></li>
    <li><a href="../docs/userguide.html">User Guide</a></li>
    <li><a href="../docs/jaxws-guide.html">JAXWS Guide</a></li>
    <li><a href="../docs/pojoguide.html">POJO Guide</a></li>
    <li><a href="../docs/spring.html">Spring Guide</a></li>
    <li><a href="../docs/webadminguide.html">Web Administrator&apos;s Guide</a></li>
    <li><a href="../docs/migration.html">Migration Guide (from Axis1)</a></li>
   <li class="nav-header">Resources</li>
    <li><a href="../faq.html">FAQ</a></li>
    <li><a href="../articles.html">Articles</a></li>
    <li><a href="http://wiki.apache.org/ws/FrontPage/Axis2/" class="externalLink">Wiki</a></li>
    <li><a href="../refLib.html">Reference Library</a></li>
    <li><a href="../apidocs/index.html">Online Java Docs</a></li>
   <li class="nav-header">Get Involved</li>
    <li><a href="../overview.html">Overview</a></li>
    <li><a href="../git.html">Checkout the Source</a></li>
    <li><a href="../mail-lists.html">Mailing Lists</a></li>
    <li><a href="../release-process.html">Release Process</a></li>
    <li><a href="../guidelines.html">Developer Guidelines</a></li>
    <li><a href="../siteHowTo.html">Build the Site</a></li>
   <li class="nav-header">Project Information</li>
    <li><a href="../team-list.html">Project Team</a></li>
    <li><a href="../issue-tracking.html">Issue Tracking</a></li>
    <li><a href="https://github.com/apache/axis-axis2-java-core" class="externalLink">Source Code</a></li>
    <li><a href="../thanks.html">Acknowledgements</a></li>
   <li class="nav-header">Apache</li>
    <li><a href="http://www.apache.org/licenses/LICENSE-2.0.html" class="externalLink">License</a></li>
    <li><a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink">Sponsorship</a></li>
    <li><a href="http://www.apache.org/foundation/thanks.html" class="externalLink">Thanks</a></li>
    <li><a href="http://www.apache.org/security/" class="externalLink">Security</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="TCP_Transport"></a>
<h1>TCP Transport</h1><section>
<h2><a id="Content">Content</a></h2>
<ul>
<li><a href="#TCP_Transport">TCP Transport</a>
<ul>
<li><a href="#Content">Content</a></li>
<li><a href="#Transport_listener">Transport listener</a>
<ul>
<li><a href="#Listener_configuration">Listener configuration</a></li>
<li><a href="#Endpoint_configuration">Endpoint configuration</a></li></ul></li>
<li><a href="#Transport_sender">Transport sender</a></li>
<li><a href="#Examples">Examples</a>
<ul>
<li><a href="#Enabling_TCP_listener_at_the_transport_level">Enabling TCP listener at the transport level</a></li></ul></li></ul></li></ul></section><section>
<h2><a id="Transport_listener">Transport listener</a></h2><section>
<h3><a id="Listener_configuration">Listener configuration</a></h3>
<p>The TCP transport listener is configured in <code>axis2.xml</code> using the following declaration:</p>
<pre class="prettyprint"><code>&lt;transportReceiver name=&quot;tcp&quot; class=&quot;org.apache.axis2.transport.tcp.TCPTransportListener&quot;/&gt;</code></pre>
<p>Depending on how the TCP transport is set up, additional parameters may be required inside the <code>transportReceiver</code> element (see next section).</p></section><section>
<h3><a id="Endpoint_configuration">Endpoint configuration</a></h3>
<p>Endpoints can be configured both at the transport level and at the service level. Each endpoint opens a TCP server socket for listening. TCP requests received on a port that is configured on a service will be pre-dispatched to that service. Packets received by a port that is configured at the transport level need to be dispatched using one of the following mechanisms:</p>
<ol style="list-style-type: decimal;">
<li>Using the namespace URI of the first child element of SOAPBody (SOAPMessageBodyBasedDispatcher).</li>
<li>Using WS-Addressing headers (SOAPActionBasedDispatcher).
<p>Endpoints are configured by adding <code>parameter</code> elements to the <code>transportReceiver</code> element in <code>axis2.xml</code> or to a <code>service</code> element in an <code>services.xml</code> file. The set of parameters is the same for both scenarios:</p>
<dl>
<dt><code>transport.tcp.port</code> (required)</dt>
<dd> The port number over which the TCP server socket should be opened.</dd>
<dt><code>transport.tcp.hostname</code> (optional)</dt>
<dd> The hostname to which the TCP server socket should be bound.</dd>
<dt><code>transport.tcp.contentType</code> (optional, defaults to text/xml)</dt>
<dd> Specifies the content type of the messages received on the endpoint.</dd>
<dt><code>transport.tcp.backlog</code> (optional, defaults to 50)</dt>
<dd> The length of the backlog (queue) supported by the TCP server socket.</dd></dl></li></ol></section></section><section>
<h2><a id="Transport_sender">Transport sender</a></h2>
<p>The TCP transport sender can be enabled in <code>axis2.xml</code> using the following declaration:</p>
<pre class="prettyprint"><code>&lt;transportSender name=&quot;tcp&quot; class=&quot;org.apache.axis2.transport.tcp.TCPTransportSender&quot;/&gt;</code></pre></section><section>
<h2><a id="Examples">Examples</a></h2><section>
<h3><a id="Enabling_TCP_listener_at_the_transport_level">Enabling TCP listener at the transport level</a></h3>
<p>The following declaration in <code>axis2.xml</code> initializes a TCP server socket on port 6060 and allows all services (for which TCP is in the list of exposed transports) to receive messages over that port:</p>
<pre class="prettyprint"><code>&lt;transportReceiver name=&quot;tcp&quot; class=&quot;org.apache.axis2.transport.tcp.TCPTransportListener&quot;&gt;
  &lt;parameter name=&quot;transport.tcp.port&quot;&gt;6060&lt;/parameter&gt;
&lt;/transportReceiver&gt;</code></pre>
<p>For this to work, WS-Addressing must be enabled, and messages sent to port 6060 must have the relevant WS-Addressing headers.</p>
<pre class="prettyprint"><code>&lt;module ref=&quot;addressing&quot;/&gt;</code></pre>
<p>With the configuration shown above, the TCP transport would generate bindings with the following EPR:</p>
<pre class="prettyprint"><code>tcp://localhost:6060/services/Version?contentType=text/xml</code></pre>
<p>Similar EPRs will be generated for services when the transport is configured at service level.</p>
<p>The following example shows a message that can be sent to the Version service over TCP:</p>
<pre class="prettyprint"><code>&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;
                   xmlns:wsa=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;
    &lt;SOAP-ENV:Header&gt;
        &lt;wsa:MessageID&gt;1234&lt;/wsa:MessageID&gt;
        &lt;wsa:To&gt;tcp://localhost:6060/services/Version?contentType=text/xml&lt;/wsa:To&gt;
        &lt;wsa:Action&gt;urn:getVersion&lt;/wsa:Action&gt;
    &lt;/SOAP-ENV:Header&gt;
    &lt;SOAP-ENV:Body&gt;
    &lt;/SOAP-ENV:Body&gt;
&lt;/SOAP-ENV:Envelope&gt;</code></pre>
<p>Axis2 client API can be used to easily send TCP requests to a remote service. The following code snippet shows how to do that. The TCP transport sender must be enabled in the <b>axis2.xml</b> in order for this to work.</p>
<pre class="prettyprint"><code>
String url = &quot;tcp://localhost:6060/services/Version?contentType=text/xml&quot;;
OMElement payload = ...

ServiceClient serviceClient = new ServiceClient();
Options options = new Options();
EndpointReference targetEPR = new EndpointReference(url);
options.setTo(targetEPR);
serviceClient.setOptions(options);
OMElement response = serviceClient.sendReceive(payload);</code></pre>
<p>The transport sender that should be invoked is inferred from the targetEPR (tcp://...). In this case it is TCP and the listener is also TCP. The SOAP message has to be self contained in order to use Addressing. The parameter is of the type OMElement, the XML representation of Axis2.</p>
<p>A TCP URL may contain an optional timeout value, as a query parameter, to indicate how long (in milliseconds) the client should wait for a response. Once this period has expired, the client TCP socket will timeout:</p>
<pre class="prettyprint"><code>tcp://localhost:6060/services/Version?contentType=text/xml&amp;timeout=10000</code></pre>
<p>If the Axis2 client API is used to send a request to the above URL, the client socket will timeout after waiting for 10 seconds, for the response.</p></section></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2004–2025
<a href="https://www.apache.org/">The Apache Software Foundation</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>