<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/xdoc/docs/adb/adb-advanced.xml at 2025-03-05
 | Rendered using Apache Maven Fluido Skin 2.0.0-M11
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>Advanced Axis2 Databinding Framework Features – Apache Axis2</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-2.0.0-M11.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />
    <script src="../../js/apache-maven-fluido-2.0.0-M11.min.js"></script>
<meta name="generator" content="HTML Tidy for Windows (vers 14 June 2007), see www.w3.org" /><meta http-equiv="content-type" content="text/html; charset=us-ascii" />  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href="http://www.apache.org/"><img class="class java.lang.Object" src="http://www.apache.org/images/asf_logo_wide.png" /> Apache Axis2</a></h1></div></div>
          <div class="pull-right"><div id="bannerRight"><h1><a href="../.././"><img class="class java.lang.Object" src="../../images/axis.jpg" /></a></h1></div></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2025-03-04<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.0.0<span class="divider">|</span></li>
      <li><a href="http://www.apache.org" class="externalLink">Apache</a><span class="divider">/</span></li>
      <li><a href="../../index.html">Axis2/Java</a><span class="divider">/</span></li>
    <li class="active">Advanced Axis2 Databinding Framework Features</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Axis2/Java</li>
    <li><a href="../../index.html">Home</a></li>
    <li><a href="../../download.html">Downloads</a></li>
    <li><a href="javascript:void(0)"><span class="icon-chevron-down"></span>Release Notes</a>
     <ul class="nav nav-list">
      <li><a href="../../release-notes/1.6.1.html">1.6.1</a></li>
      <li><a href="../../release-notes/1.6.2.html">1.6.2</a></li>
      <li><a href="../../release-notes/1.6.3.html">1.6.3</a></li>
      <li><a href="../../release-notes/1.6.4.html">1.6.4</a></li>
      <li><a href="../../release-notes/1.7.0.html">1.7.0</a></li>
      <li><a href="../../release-notes/1.7.1.html">1.7.1</a></li>
      <li><a href="../../release-notes/1.7.2.html">1.7.2</a></li>
      <li><a href="../../release-notes/1.7.3.html">1.7.3</a></li>
      <li><a href="../../release-notes/1.7.4.html">1.7.4</a></li>
      <li><a href="../../release-notes/1.7.5.html">1.7.5</a></li>
      <li><a href="../../release-notes/1.7.6.html">1.7.6</a></li>
      <li><a href="../../release-notes/1.7.7.html">1.7.7</a></li>
      <li><a href="../../release-notes/1.7.8.html">1.7.8</a></li>
      <li><a href="../../release-notes/1.7.9.html">1.7.9</a></li>
      <li><a href="../../release-notes/1.8.0.html">1.8.0</a></li>
      <li><a href="../../release-notes/1.8.1.html">1.8.1</a></li>
      <li><a href="../../release-notes/1.8.2.html">1.8.2</a></li>
      <li><a href="../../release-notes/2.0.0.html">2.0.0</a></li>
     </ul></li>
    <li><a href="../../modules/index.html">Modules</a></li>
    <li><a href="../../tools/index.html">Tools</a></li>
   <li class="nav-header">Documentation</li>
    <li><a href="../../docs/toc.html">Table of Contents</a></li>
    <li><a href="../../docs/installationguide.html">Installation Guide</a></li>
    <li><a href="../../docs/quickstartguide.html">QuickStart Guide</a></li>
    <li><a href="../../docs/userguide.html">User Guide</a></li>
    <li><a href="../../docs/jaxws-guide.html">JAXWS Guide</a></li>
    <li><a href="../../docs/pojoguide.html">POJO Guide</a></li>
    <li><a href="../../docs/spring.html">Spring Guide</a></li>
    <li><a href="../../docs/webadminguide.html">Web Administrator&apos;s Guide</a></li>
    <li><a href="../../docs/migration.html">Migration Guide (from Axis1)</a></li>
   <li class="nav-header">Resources</li>
    <li><a href="../../faq.html">FAQ</a></li>
    <li><a href="../../articles.html">Articles</a></li>
    <li><a href="http://wiki.apache.org/ws/FrontPage/Axis2/" class="externalLink">Wiki</a></li>
    <li><a href="../../refLib.html">Reference Library</a></li>
    <li><a href="../../apidocs/index.html">Online Java Docs</a></li>
   <li class="nav-header">Get Involved</li>
    <li><a href="../../overview.html">Overview</a></li>
    <li><a href="../../git.html">Checkout the Source</a></li>
    <li><a href="../../mail-lists.html">Mailing Lists</a></li>
    <li><a href="../../release-process.html">Release Process</a></li>
    <li><a href="../../guidelines.html">Developer Guidelines</a></li>
    <li><a href="../../siteHowTo.html">Build the Site</a></li>
   <li class="nav-header">Project Information</li>
    <li><a href="../../team-list.html">Project Team</a></li>
    <li><a href="../../issue-tracking.html">Issue Tracking</a></li>
    <li><a href="https://github.com/apache/axis-axis2-java-core" class="externalLink">Source Code</a></li>
    <li><a href="../../thanks.html">Acknowledgements</a></li>
   <li class="nav-header">Apache</li>
    <li><a href="http://www.apache.org/licenses/LICENSE-2.0.html" class="externalLink">License</a></li>
    <li><a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink">Sponsorship</a></li>
    <li><a href="http://www.apache.org/foundation/thanks.html" class="externalLink">Thanks</a></li>
    <li><a href="http://www.apache.org/security/" class="externalLink">Security</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<html xmlns="http://www.w3.org/1999/xhtml">

<section><a id="Advanced_Axis2_Databinding_Framework_Features"></a>
<h1>Advanced Axis2 Databinding Framework Features</h1>

<p>The aim of this section is provide an insight into the newly
added advanced features of the Axis2 Databinding (ADB)
Framework.</p>
<section><a id="Content"></a>
<h2>Content</h2>

<ul>

<li><a href="#typeSupport">xsi:type Support</a></li>

<li><a href="#helper">Helper Mode</a></li>

<li><a href="#more">Additional ADB Topics</a></li>
</ul>
<a id="typeSupport"></a>
</section><section><a id="xsi.3Atype_Support"></a>
<h2>xsi:type Support</h2>

<p>This is implemented by adding a extension mapping class. The
code that calls the extension mapper is generated inside the
Factory.parse method of the beans and gets activated when the
xsi:type attribute is present. The following code fragment shows
what the generated type mapper looks like :</p>

<pre>
            public static java.lang.Object getTypeObject(java.lang.String namespaceURI,
                                java.lang.String typeName,
                                javax.xml.stream.XMLStreamReader reader) throws java.lang.Exception{
              
                  if (
                  &quot;http://soapinterop.org/types&quot;.equals(namespaceURI) &amp;&amp;
                  &quot;SOAPStruct&quot;.equals(typeName)){
                            return  com.test.SOAPStruct.Factory.parse(reader);
                  }
              throw new java.lang.RuntimeException(&quot;Unsupported type &quot; + namespaceURI + &quot; &quot; + typeName);
            }
</pre>

<p>Inside every Factory.parse method, the extension mapper gets
called when a xsi:type attribute is encountered
<strong>and</strong> that type is not the type that is currently
being parsed.</p>

<p>The following code fragment shows how the ADB deserialize method
calls the mapper class:</p>

<pre>
             if (reader.getAttributeValue(&quot;http://www.w3.org/2001/XMLSchema-instance&quot;,&quot;type&quot;)!=null){
                  java.lang.String fullTypeName = reader.getAttributeValue(&quot;http://www.w3.org/2001/XMLSchema-instance&quot;,
                        &quot;type&quot;);
                  if (fullTypeName!=null){
                    java.lang.String nsPrefix = fullTypeName.substring(0,fullTypeName.indexOf(&quot;:&quot;));
                    nsPrefix = nsPrefix==null?&quot;&quot;:nsPrefix;

                    java.lang.String type = fullTypeName.substring(fullTypeName.indexOf(&quot;:&quot;)+1);
                    if (!&quot;SOAPStruct&quot;.equals(type)){
                        //find namespace for the prefix
                        java.lang.String nsUri = reader.getNamespaceContext().getNamespaceURI(nsPrefix);
                        return (SOAPStruct)org.soapinterop.types.ExtensionMapper.getTypeObject(
                             nsUri,type,reader);
                      }

                  }
              }
</pre>

<p>This makes xsi:type based parsing possible and results in proper
xsi:type based serializations at runtime.</p>

<p>By default, the mapping package is derived from the
targetnamespace of the first schema that is encountered. The
package name can also be explicitly set by a CompilerOption:</p>

<pre>
   
        CompilerOptions compilerOptions = new CompilerOptions();
        compilerOptions.setWriteOutput(true);
        <strong>compilerOptions.setMapperClassPackage(&quot;com.test&quot;);</strong>
        compilerOptions.setOutputLocation(new File(&quot;src&quot;));
        try {
            SchemaCompiler schemaCompiler = new SchemaCompiler(compilerOptions);
            XmlSchemaCollection xmlSchemaCollection = new XmlSchemaCollection();
            XmlSchema xmlSchema =xmlSchemaCollection.read(new FileReader(&quot;schema/sample.xsd&quot;),null);
            schemaCompiler.compile(xmlSchema);
        } catch (Exception e) {
            e.printStackTrace();
        }
</pre>
<a id="helper"></a>
</section><section><a id="Helper_mode"></a>
<h2>Helper mode</h2>

<p>Helper mode is a fairly new feature. In the helper mode, the
beans are plain Java beans and all the
deserialization/serialization code is moved to a helper class. For
example, the simple schema mentioned in the ADB-howto document will
yield four classes instead of the two previously generated:</p>

<ol style="list-style-type: decimal;">

<li>MyElement.java</li>

<li>MyElementHelper.java</li>

<li>SOAPStruct.java</li>

<li>SOAPStructHelper.java</li>
</ol>

<p>The helpers basically contain all the serialization code that
otherwise would go into the ADBBeans. Hence the beans in the helper
mode are much more simplified. Also note that the helper mode is
available only if you are in unpacked mode. The code generator by
default does not expand the classes.</p>

<p>Helper mode can be switched on by using the setHelperMode method
in CompilerOptions:</p>

<pre>
<strong>compilerOptions.setHelperMode(true);</strong>
</pre>
<a id="more"></a>
</section><section><a id="Additional_ADB_Topics"></a>
<h2>Additional ADB Topics</h2>

<ul>

<li><a href="adb-tweaking.html">Tweaking the ADB Code
Generator</a>- explains available mechanisms to extend ADB and
possibly adopt it to compile schemas to support other
languages.</li>

<li><a href="adb-codegen-integration.html">ADB and Axis2
Integration</a> - explains how the ADB schema compiler was attached
to the Axis2 framework</li>
</ul>
<hr />
</section>
</html>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2004–2025
<a href="https://www.apache.org/">The Apache Software Foundation</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>